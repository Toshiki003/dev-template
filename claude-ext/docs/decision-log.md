# Decision Log

実装中に発生した設計判断を記録するドキュメント。

---

## テンプレート

### YYYY-MM-DD: [トピック]

**決定**: [何を決めたか]

**理由**:
- [理由1]
- [理由2]

**代替案**: [検討した他の選択肢]
- 却下理由: [なぜ選ばなかったか]

---

## 実際の記録

### 2026-02-24: PRサマリ生成のLLMプロバイダー切り替え対応

**決定**: OpenAI互換エンドポイント方式を採用し、APIベースURL・モデル名・APIキーの3つをGitHub Variables/Secretsで切り替え可能にする。デフォルトはGemini（gemini-2.5-flash）。

**理由**:
- GeminiがOpenAI互換エンドポイント（`/v1beta/openai/chat/completions`）を提供しているため、既存のリクエスト形式をほぼそのまま流用できる
- 変更箇所が最小限（ベースURL・モデル名・Secret名の3点のみ）
- `vars.XXX || 'デフォルト値'` パターンにより、Gemini利用時は `LLM_API_KEY` のSecret設定のみで動作する
- OpenAI/Anthropic等への切り替えもVariableの変更だけで対応可能

**代替案**:
- **プロバイダーごとに分岐するswitch方式**: 各プロバイダー固有のSDK/APIフォーマットを個別実装
  - 却下理由: コード量が大幅に増え、新プロバイダー追加のたびにワークフロー修正が必要
- **OPENAI_API_KEYへのフォールバック維持**: 旧Secret名との後方互換を残す
  - 却下理由: テンプレートリポジトリのため既存リポジトリへの直接影響なし。設定の複雑化を避ける
